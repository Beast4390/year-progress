<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Year Progress Wallpaper</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: black;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* Center canvas on laptops */
body {
  display: flex;
  align-items: center;
  justify-content: center;
}

canvas {
  background: black;
  width: auto;
  height: 100vh;
  max-width: 100vw;
  aspect-ratio: 1080 / 2340;
}
</style>
</head>

<body>

<canvas id="yearCanvas" width="1080" height="2340"></canvas>

<script>
window.onload = function () {

  const canvas = document.getElementById("yearCanvas");
  const ctx = canvas.getContext("2d");

  /* ========= SETTINGS ========= */
  const YEAR = 2026;
  const TOTAL_DAYS = 365;

  const DOT_RADIUS = 13;
  const DOT_GAP = 14;
  const COLUMNS = 14;

  const DOT_SIZE = DOT_RADIUS * 2;
  const ROWS = Math.ceil(TOTAL_DAYS / COLUMNS);

  /* ========= COLORS ========= */
  const COLOR_FUTURE = "#333";
  const COLOR_PAST = "#ffffff";
  const COLOR_TODAY = "#00ffcc";
  const COLOR_JAN12 = "#8a2be2";
  const COLOR_FEB12 = "#007bff";

  /* ========= QUOTES ========= */
  const quotes = [
    "Every day counts. Don’t waste today.",
    "Small steps every day.",
    "Discipline beats motivation.",
    "No zero days.",
    "Your future depends on today.",
    "Stay consistent.",
    "One day or day one.",
    "Progress over perfection.",
    "Do it even when you don’t feel like it.",
    "Be better than yesterday."
  ];

  /* ========= DATE LOGIC ========= */
  const today = new Date();
  const yearStart = new Date(YEAR, 0, 1);
  const todayIndex = Math.max(
    0,
    Math.floor((today - yearStart) / 86400000)
  );

  const daysCompleted = todayIndex;
  const daysLeft = TOTAL_DAYS - todayIndex - 1;
  const progressPercent = ((daysCompleted / TOTAL_DAYS) * 100).toFixed(1);
  const todayQuote = quotes[todayIndex % quotes.length];

  /* ========= BACKGROUND ========= */
  ctx.fillStyle = "#000";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  /* ========= GRID SIZE ========= */
  const gridWidth =
    (COLUMNS * DOT_SIZE) + ((COLUMNS - 1) * DOT_GAP);

  const gridHeight =
    (ROWS * DOT_SIZE) + ((ROWS - 1) * DOT_GAP);

  /* ========= SAFE AREAS (Samsung + Desktop) ========= */
  const SAFE_TOP = canvas.height * 0.06;
  const SAFE_BOTTOM = canvas.height * 0.10;
  const usableHeight = canvas.height - SAFE_TOP - SAFE_BOTTOM;

  /* ========= GRID POSITION ========= */
  const startX = (canvas.width - gridWidth) / 2;
  const startY = SAFE_TOP + (usableHeight - gridHeight) / 2;

  /* ========= DRAW DOT GRID ========= */
  let x = startX;
  let y = startY;
  let col = 0;

  for (let i = 0; i < TOTAL_DAYS; i++) {
    let color = COLOR_FUTURE;

    if (i < todayIndex) color = COLOR_PAST;
    if (i === todayIndex) color = COLOR_TODAY;
    if (i === 11) color = COLOR_JAN12;
    if (i === 42) color = COLOR_FEB12;

    ctx.beginPath();
    ctx.arc(
      x + DOT_RADIUS,
      y + DOT_RADIUS,
      DOT_RADIUS,
      0,
      Math.PI * 2
    );
    ctx.fillStyle = color;
    ctx.fill();

    col++;
    x += DOT_SIZE + DOT_GAP;

    if (col === COLUMNS) {
      col = 0;
      x = startX;
      y += DOT_SIZE + DOT_GAP;
    }
  }

  /* ========= TEXT ========= */
  const TEXT_START = startY + gridHeight + 70;

  ctx.textAlign = "center";

  ctx.fillStyle = "#ffffff";
  ctx.font = "bold 42px Arial";
  ctx.fillText(todayQuote, canvas.width / 2, TEXT_START);

  ctx.fillStyle = "#00ffcc";
  ctx.font = "bold 38px Arial";
  ctx.fillText(
    `${progressPercent}% of the year completed`,
    canvas.width / 2,
    TEXT_START + 50
  );

  ctx.fillStyle = "#aaaaaa";
  ctx.font = "bold 36px Arial";
  ctx.fillText(
    `Days completed: ${daysCompleted}   |   Days left: ${daysLeft}`,
    canvas.width / 2,
    TEXT_START + 100
  );

  /* ========= AUTO-EXPORT PNG MODE ========= */
  const params = new URLSearchParams(window.location.search);
  if (params.get("export") === "png") {
    const link = document.createElement("a");
    link.download = `year-progress-${YEAR}-day-${daysCompleted}.png`;
    link.href = canvas.toDataURL("image/png");
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }
};
</script>

</body>
</html>
